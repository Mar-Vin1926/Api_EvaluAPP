{"openapi":"3.1.0","info":{"title":"API - Proyecto Integrador - Backend II","description":"CESDE - Desarrollo de Software"},"servers":[{"url":"http://localhost:8080","description":"Servidor Local"}],"tags":[{"name":"Home","description":"API for general system information"},{"name":"Examenes","description":"API para gestionar examenes"},{"name":"Opciones","description":"API para gestionar opciones de preguntas"},{"name":"Student User","description":"APIs for managing student profile information"},{"name":"Authentication","description":"Authentication endpoints"},{"name":"Preguntas","description":"API para gestionar preguntas de los exámenes"},{"name":"Admin User","description":"Admin operations"}],"paths":{"/api/student/profile":{"get":{"tags":["Student User"],"summary":"Get student profile","description":"Retrieves the authenticated student's profile information","operationId":"getProfile","responses":{"200":{"description":"Successfully retrieved profile","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProfileDTO"}}}},"401":{"description":"Unauthorized - authentication required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProfileDTO"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProfileDTO"}}}}},"security":[{"Bearer Authentication":[]}]},"put":{"tags":["Student User"],"summary":"Update student profile","description":"Updates the authenticated student's profile information","operationId":"updateProfile","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileDTO"}}},"required":true},"responses":{"200":{"description":"Profile updated successfully","content":{"*/*":{"schema":{"type":"string"}}}},"401":{"description":"Unauthorized - authentication required","content":{"*/*":{"schema":{"type":"string"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"*/*":{"schema":{"type":"string"}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/preguntas/{id}":{"get":{"tags":["Preguntas"],"summary":"Obtener una pregunta por ID","operationId":"getPreguntaById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Pregunta encontrada","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Pregunta"}}}},"404":{"description":"Pregunta no encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Pregunta"}}}}}},"put":{"tags":["Preguntas"],"summary":"Actualizar una pregunta existente","operationId":"updatePregunta","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Pregunta"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Pregunta"}}}}}},"delete":{"tags":["Preguntas"],"summary":"Eliminar una pregunta por ID","operationId":"deletePregunta","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/api/examenes/{id}":{"get":{"tags":["Examenes"],"summary":"Obtener un examen por ID del usuario ","description":"Retorna un examen específico basado en el ID proporcionado","operationId":"getExamenById","parameters":[{"name":"id","in":"path","description":"ID del examen a buscar","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Examen encontrado correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Examen"}}}},"404":{"description":"Examen no encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Examen"}}}}}},"put":{"tags":["Examenes"],"summary":"Actualizar un examen","description":"Actualiza un examen existente con la información proporcionada","operationId":"updateExamen","parameters":[{"name":"id","in":"path","description":"ID del examen a actualizar","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Examen"}}},"required":true},"responses":{"200":{"description":"Examen actualizado correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Examen"}}}},"404":{"description":"Examen no encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Examen"}}}}}},"delete":{"tags":["Examenes"],"summary":"Eliminar un examen","description":"Elimina un examen basado en el ID proporcionado","operationId":"deleteExamen","parameters":[{"name":"id","in":"path","description":"ID del examen a eliminar","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Examen eliminado correctamente"},"404":{"description":"Examen no encontrado"}}}},"/api/admin/users/{id}":{"get":{"tags":["Admin User"],"summary":"Get user by ID","description":"Retrieves a user by their ID","operationId":"getUserById","parameters":[{"name":"id","in":"path","description":"ID of the user to retrieve","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"User found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"Bearer Authentication":[]}]},"put":{"tags":["Admin User"],"summary":"Update user","description":"Updates an existing user's information","operationId":"updateUser","parameters":[{"name":"id","in":"path","description":"ID of the user to update","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateDTO"}}},"required":true},"responses":{"200":{"description":"User updated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponseDTO"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponseDTO"}}}},"400":{"description":"Invalid input data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponseDTO"}}}}},"security":[{"Bearer Authentication":[]}]},"delete":{"tags":["Admin User"],"summary":"Delete user","description":"Deletes a user from the system","operationId":"deleteUser","parameters":[{"name":"id","in":"path","description":"ID of the user to delete","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"User deleted successfully"},"404":{"description":"User not found"}},"security":[{"Bearer Authentication":[]}]}},"/api/admin/users/{id}/reset-password":{"put":{"tags":["Admin User"],"summary":"Reset user password","description":"Resets a user's password (admin only)","operationId":"resetPassword","parameters":[{"name":"id","in":"path","description":"ID of the user","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"newPassword","in":"query","description":"New password","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Password reset successfully"},"404":{"description":"User not found"},"403":{"description":"Not authorized to reset password"}},"security":[{"Bearer Authentication":[]}]}},"/api/admin/users/{id}/password":{"put":{"tags":["Admin User"],"summary":"Change user password","description":"Changes a user's password","operationId":"changePassword","parameters":[{"name":"id","in":"path","description":"ID of the user","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"oldPassword","in":"query","description":"Current password","required":true,"schema":{"type":"string"}},{"name":"newPassword","in":"query","description":"New password","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Password changed successfully"},"400":{"description":"Invalid password"},"404":{"description":"User not found"}},"security":[{"Bearer Authentication":[]}]}},"/api/preguntas":{"get":{"tags":["Preguntas"],"summary":"Obtener todas las preguntas","operationId":"getAllPreguntas","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Pregunta"}}}}}}},"post":{"tags":["Preguntas"],"summary":"Crear una nueva pregunta","operationId":"createPregunta","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreguntaRequestDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Pregunta"}}}}}}},"/api/opciones":{"post":{"tags":["Opciones"],"summary":"Crear una nueva opción","operationId":"createOpcion","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OpcionRequestDTO"}}},"required":true},"responses":{"201":{"description":"Opción creada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Opcion"}}}},"404":{"description":"Pregunta no encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Opcion"}}}}}}},"/api/examenes":{"get":{"tags":["Examenes"],"summary":"Obtener todos los exámenes","description":"Retorna una lista con todos los exámenes disponibles","operationId":"getAllExams","responses":{"200":{"description":"Lista de exámenes obtenida correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Examen"}}}}}},"post":{"tags":["Examenes"],"summary":"Crear un nuevo examen","description":"Crea un nuevo examen con la información proporcionada","operationId":"createExamen","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Examen"}}},"required":true},"responses":{"200":{"description":"Examen creado correctamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Examen"}}}}}}},"/api/auth/login":{"post":{"tags":["Authentication"],"operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/admin/users/register":{"post":{"tags":["Admin User"],"summary":"Register a new user","description":"Creates a new user in the system","operationId":"registerUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRegisterDTO"}}},"required":true},"responses":{"201":{"description":"User successfully created","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponseDTO"}}}},"400":{"description":"Invalid input data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponseDTO"}}}},"409":{"description":"User already exists","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponseDTO"}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/opciones/pregunta/{preguntaId}":{"get":{"tags":["Opciones"],"summary":"Obtener opciones por pregunta","operationId":"getOpcionesByPregunta","parameters":[{"name":"preguntaId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Lista de opciones encontradas","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Opcion"}}}}}}},"/api/admin/users":{"get":{"tags":["Admin User"],"summary":"Get all users","description":"Retrieves a list of all users in the system","operationId":"getAllUsers","responses":{"200":{"description":"List of users retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/admin/users/role/{role}":{"get":{"tags":["Admin User"],"summary":"Get users by role","description":"Retrieves a list of users with a specific role","operationId":"getUsersByRole","parameters":[{"name":"role","in":"path","description":"Role to filter users by","required":true,"schema":{"type":"string","enum":["ADMIN","STUDENT","TEACHER"]}}],"responses":{"200":{"description":"List of users retrieved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Invalid role","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}}},"security":[{"Bearer Authentication":[]}]}},"/api/admin/users/email/{email}":{"get":{"tags":["Admin User"],"summary":"Get user by email","description":"Retrieves a user by their email address","operationId":"getUserByEmail","parameters":[{"name":"email","in":"path","description":"Email of the user to retrieve","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"User found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"Bearer Authentication":[]}]}},"/":{"get":{"tags":["Home"],"summary":"Get general information","description":"Returns general information about the API including title, version, description, documentation URL, and author information","operationId":"welcome","responses":{"200":{"description":"Successfully retrieved system information with all fields populated","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}}},"components":{"schemas":{"ProfileDTO":{"type":"object","properties":{"name":{"type":"string"},"lastName":{"type":"string"},"phone":{"type":"string"},"address":{"type":"string"},"urlPhoto":{"type":"string"}}},"Examen":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"titulo":{"type":"string"},"descripcion":{"type":"string"},"fechaInicio":{"type":"string","format":"date"},"fechaFin":{"type":"string","format":"date"},"creador":{"$ref":"#/components/schemas/User"}}},"Pregunta":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"textoPregunta":{"type":"string"},"tipoPregunta":{"type":"string","enum":["SELECCION_UNICA","MULTIPLE","TEXTO_ABIERTO"]},"examen":{"$ref":"#/components/schemas/Examen"}}},"Profile":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"lastName":{"type":"string"},"phone":{"type":"string"},"address":{"type":"string"},"urlPhoto":{"type":"string"},"user":{"$ref":"#/components/schemas/User"}}},"User":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"email":{"type":"string"},"password":{"type":"string","maxLength":2147483647,"minLength":8},"role":{"type":"string","enum":["ADMIN","STUDENT","TEACHER"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"profile":{"$ref":"#/components/schemas/Profile"}}},"UserUpdateDTO":{"type":"object","description":"Updated user details","properties":{"email":{"type":"string"},"role":{"type":"string","enum":["ADMIN","STUDENT","TEACHER"]}}},"UserResponseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"email":{"type":"string"},"role":{"type":"string","enum":["ADMIN","STUDENT","TEACHER"]}}},"PreguntaRequestDTO":{"type":"object","properties":{"textoPregunta":{"type":"string","description":"Texto de la pregunta","example":"¿Qué es Java?","maxLength":2147483647,"minLength":5},"tipoPregunta":{"type":"string","description":"Tipo de la pregunta","enum":["SELECCION_UNICA","MULTIPLE","TEXTO_ABIERTO"],"example":"SELECCION_UNICA"},"examenId":{"type":"integer","format":"int64","description":"ID del examen al que pertenece","example":3},"puntos":{"type":"integer","format":"int32","description":"Puntaje que vale esta pregunta","example":5,"minimum":1}},"required":["examenId","textoPregunta","tipoPregunta"]},"OpcionRequestDTO":{"type":"object","description":"DTO para recibir datos de una opción de respuesta","properties":{"textoOpcion":{"type":"string","description":"Texto visible de la opción","example":"Polimorfismo"},"esCorrecta":{"type":"boolean","description":"Indica si la opción es correcta","example":true},"preguntaId":{"type":"integer","format":"int64","description":"ID de la pregunta a la que pertenece","example":4}},"required":["esCorrecta","preguntaId","textoOpcion"]},"Opcion":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"textoOpcion":{"type":"string"},"esCorrecta":{"type":"boolean"},"pregunta":{"$ref":"#/components/schemas/Pregunta"}}},"UserLoginDTO":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}}},"UserRegisterDTO":{"type":"object","description":"User details for registration","properties":{"email":{"type":"string"},"password":{"type":"string","maxLength":2147483647,"minLength":8},"password_confirmation":{"type":"string"},"role":{"type":"string","enum":["ADMIN","STUDENT","TEACHER"]}}}}}}